# =============================================================================
# DY OFFICIAL - PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env.production and fill in your production values
# Last Updated: October 14, 2025

# =============================================================================
# DATABASE & CORE SERVICES
# =============================================================================
DATABASE_URL="postgresql://username:password@hostname:5432/database"
DATABASE_MAX_CONNECTIONS="20"
NEXTAUTH_URL="https://yourdomain.com"
NEXTAUTH_SECRET="your-super-secure-nextauth-secret-in-production"

# =============================================================================
# REDIS CACHING & SESSION MANAGEMENT
# =============================================================================
REDIS_URL="redis://username:password@hostname:6379"
REDIS_MAX_RETRIES="3"
REDIS_RETRY_DELAY="100"

# =============================================================================
# SHIPPING CARRIER API CONFIGURATION
# =============================================================================

# Royal Mail API
ROYAL_MAIL_API_KEY="your-royal-mail-api-key"
ROYAL_MAIL_API_SECRET="your-royal-mail-api-secret"
ROYAL_MAIL_ENVIRONMENT="production"  # or "sandbox"
ROYAL_MAIL_WEBHOOK_SECRET="your-royal-mail-webhook-secret"

# DPD API
DPD_API_KEY="your-dpd-api-key"
DPD_API_SECRET="your-dpd-api-secret"
DPD_ENVIRONMENT="production"  # or "sandbox"
DPD_ACCOUNT_NUMBER="your-dpd-account-number"
DPD_WEBHOOK_SECRET="your-dpd-webhook-secret"

# FedEx API
FEDEX_API_KEY="your-fedex-api-key"
FEDEX_API_SECRET="your-fedex-api-secret"
FEDEX_ACCOUNT_NUMBER="your-fedex-account-number"
FEDEX_METER_NUMBER="your-fedex-meter-number"
FEDEX_ENVIRONMENT="production"  # or "sandbox"
FEDEX_WEBHOOK_SECRET="your-fedex-webhook-secret"

# UPS API
UPS_API_KEY="your-ups-api-key"
UPS_API_SECRET="your-ups-api-secret"
UPS_ACCESS_TOKEN="your-ups-access-token"
UPS_ACCOUNT_NUMBER="your-ups-account-number"
UPS_ENVIRONMENT="production"  # or "sandbox"
UPS_WEBHOOK_SECRET="your-ups-webhook-secret"

# DHL API
DHL_API_KEY="your-dhl-api-key"
DHL_API_SECRET="your-dhl-api-secret"
DHL_ACCOUNT_NUMBER="your-dhl-account-number"
DHL_ENVIRONMENT="production"  # or "sandbox"
DHL_WEBHOOK_SECRET="your-dhl-webhook-secret"

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================
WEBHOOK_BASE_URL="https://yourdomain.com/api/webhooks"
WEBHOOK_RETRY_ATTEMPTS="3"
WEBHOOK_RETRY_DELAY_MS="1000"
WEBHOOK_TIMEOUT_MS="30000"

# Webhook Endpoints (auto-generated, but can be customized)
ROYAL_MAIL_WEBHOOK_URL="${WEBHOOK_BASE_URL}/shipping/royal-mail"
DPD_WEBHOOK_URL="${WEBHOOK_BASE_URL}/shipping/dpd"
FEDEX_WEBHOOK_URL="${WEBHOOK_BASE_URL}/shipping/fedex"
UPS_WEBHOOK_URL="${WEBHOOK_BASE_URL}/shipping/ups"
DHL_WEBHOOK_URL="${WEBHOOK_BASE_URL}/shipping/dhl"

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Sentry (Error Tracking)
SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"
SENTRY_ORG="your-sentry-org"
SENTRY_PROJECT="your-sentry-project"
SENTRY_AUTH_TOKEN="your-sentry-auth-token"
SENTRY_ENVIRONMENT="production"

# Application Performance Monitoring
NEW_RELIC_LICENSE_KEY="your-new-relic-license-key"  # Optional
DATADOG_API_KEY="your-datadog-api-key"  # Optional

# Health Check Configuration
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_INTERVAL_MS="60000"  # 1 minute
HEALTH_CHECK_TIMEOUT_MS="5000"

# =============================================================================
# NOTIFICATION SERVICES
# =============================================================================

# Email Service (Choose one)
RESEND_API_KEY="your-resend-api-key"  # Recommended
# Alternative: SENDGRID_API_KEY="your-sendgrid-api-key"
# Alternative: MAILGUN_API_KEY="your-mailgun-api-key"

# SMTP Configuration (Alternative to API services)
SMTP_HOST="smtp.your-email-provider.com"
SMTP_PORT="587"
SMTP_USER="your-smtp-username"
SMTP_PASS="your-smtp-password"
SMTP_FROM="noreply@yourdomain.com"

# SMS Service (Choose one)
TWILIO_ACCOUNT_SID="your-twilio-account-sid"
TWILIO_AUTH_TOKEN="your-twilio-auth-token"
TWILIO_PHONE_NUMBER="your-twilio-phone-number"
# Alternative: AWS_SNS_ACCESS_KEY="your-aws-sns-access-key"

# Push Notifications (Optional)
FIREBASE_ADMIN_SDK_JSON="path-to-firebase-admin-sdk.json"  # Optional

# =============================================================================
# CACHING & PERFORMANCE
# =============================================================================

# Redis (Recommended for production)
REDIS_URL="redis://username:password@hostname:6379"
REDIS_PASSWORD="your-redis-password"
REDIS_TTL_SECONDS="3600"  # 1 hour default

# Database Connection Pool
DATABASE_CONNECTION_LIMIT="20"
DATABASE_POOL_TIMEOUT="20000"  # 20 seconds

# =============================================================================
# SHIPPING BUSINESS CONFIGURATION
# =============================================================================

# Default Shipping Settings
DEFAULT_CARRIER="ROYAL_MAIL"  # Fallback carrier
FREE_SHIPPING_THRESHOLD_PENCE="5000"  # £50.00
EXPEDITED_SHIPPING_THRESHOLD_PENCE="10000"  # £100.00

# Warehouse Configuration
DEFAULT_WAREHOUSE_ADDRESS_LINE1="Your Warehouse Address"
DEFAULT_WAREHOUSE_CITY="Your City"
DEFAULT_WAREHOUSE_POSTCODE="SW1A 1AA"
DEFAULT_WAREHOUSE_COUNTRY="GB"
DEFAULT_WAREHOUSE_PHONE="+44 20 1234 5678"

# Business Hours (for fulfillment processing)
FULFILLMENT_START_HOUR="9"  # 9 AM
FULFILLMENT_END_HOUR="17"   # 5 PM
FULFILLMENT_TIMEZONE="Europe/London"

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# API Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE="100"
RATE_LIMIT_ADMIN_REQUESTS_PER_MINUTE="1000"

# CORS Configuration
ALLOWED_ORIGINS="https://yourdomain.com,https://www.yourdomain.com"

# Security Headers
SECURITY_HEADERS_ENABLED="true"
HSTS_MAX_AGE_SECONDS="31536000"  # 1 year

# =============================================================================
# ANALYTICS & REPORTING
# =============================================================================

# Google Analytics (Optional)
GOOGLE_ANALYTICS_ID="G-XXXXXXXXXX"

# Internal Analytics
ANALYTICS_ENABLED="true"
ANALYTICS_BATCH_SIZE="100"
ANALYTICS_FLUSH_INTERVAL_MS="30000"  # 30 seconds

# =============================================================================
# DEVELOPMENT & DEBUGGING (Set to false in production)
# =============================================================================
NODE_ENV="production"
DEBUG_ENABLED="false"
LOG_LEVEL="info"  # error, warn, info, debug
PRETTY_LOGS="false"  # Set to true for local development

# Feature Flags
FEATURE_INTERNATIONAL_SHIPPING="false"  # Enable when ready
FEATURE_CARBON_TRACKING="false"         # Enable when ready
FEATURE_DELIVERY_SLOTS="false"          # Enable when ready

# =============================================================================
# FILE STORAGE & BACKUP
# =============================================================================

# AWS S3 Configuration (for file uploads and backups)
AWS_ACCESS_KEY_ID="your-aws-access-key"
AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
AWS_REGION="eu-west-1"
AWS_S3_BUCKET="your-s3-bucket-name"

# Stripe Payment Processing
STRIPE_SECRET_KEY="sk_live_your-stripe-secret-key"
STRIPE_PUBLISHABLE_KEY="pk_live_your-stripe-publishable-key" 
STRIPE_WEBHOOK_SECRET="whsec_your-stripe-webhook-secret"

# Backup & Disaster Recovery
BACKUP_ENABLED="true"
BACKUP_S3_BUCKET="your-backup-bucket"
BACKUP_S3_REGION="eu-west-1"

# =============================================================================
# NOTES & DOCUMENTATION
# =============================================================================
# 
# 1. SECURITY: Never commit this file to version control
# 2. ROTATION: Rotate secrets regularly (quarterly recommended)
# 3. ACCESS: Limit access to production environment variables
# 4. MONITORING: Set up alerts for failed API calls and webhook deliveries
# 5. TESTING: Test all integrations in sandbox before production deployment
#
# For setup instructions and API documentation, see:
# - /docs/CARRIER_SETUP.md
# - /docs/WEBHOOK_CONFIGURATION.md
# - /docs/MONITORING_SETUP.md
#